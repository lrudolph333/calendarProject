<!DOCTYPE html>
<html>
  <head>
    <title>Login - To Do</title>
  </head>
  <body>
    <h2>To Do</h2>
      <form id="loginInfo">
        <div>
        <p>Username: <input id="username" required type="text"/></p>
        <br>
        <p>Password: <input id="password" required type="password"/></p>
        <br>
        <input type="submit" id="loginbtn" value="Login"></input>
        <input type="submit" id="signupbtn" value="Sign Up"></input>
      </div>
    </form>
    <script>

      document.getElementById("loginInfo").addEventListener("submit", function(e) {

        e.preventDefault();

        var buttonPressed = document.querySelector("input[type=submit]:focus").id;

        if(buttonPressed == "loginbtn") {
          login();
        }
        else {
          signup();
        }

      });

      function login() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            document.body.innerHTML = xhttp.responseText;
          }
        };
        xhttp.open("POST", "/login", true);
        xhttp.send();
      }
      function signup() {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            document.body.innerHTML = xhttp.responseText;
          }
        };
        xhttp.open("POST", "/signup", true);
        xhttp.send();
      }
    </script>
  </body>
</html>
