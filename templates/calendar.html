<!DOCTYPE html>
<html>
  <head>
    <title>Calendar - To Do</title>
    <link rel="stylesheet" type="text/css" href="stylesheet/calendar.css">
  </head>
  <body>
    <div class="topbar">
      <div class="weekButton" onclick="backWeek()">
        <p>Back one week</p>
      </div>
      <div class="currentWeek">
        <p id="currentWeekText"></p>
      </div>
      <div class="weekButton" onclick="forwardWeek()" id="rightButton">
        <p>Forward one week</p>
      </div>
    </div>
    <div class="sidebar">
      <div class="sideItem">
        <p class="selection" onclick="dashboard()">Dashboard</p>
      </div>
      <div class="sideItem">
        <p class="selection" onclick="add()">Add</p>
      </div>
      <div class="sideItem">
        <p class="selection" onclick="search()">Search</p>
      </div>
      <div class="sideItem">
        <p class="selection" onclick="settings()">Settings</p>
      </div>
    </div>
    <div class="calendar">
      <div class="day" id="day1">
      </div>
      <div class="day" id="day2">
      </div>
      <div class="day" id="day3">
      </div>
      <div class="day" id="day4">
      </div>
      <div class="day" id="day5">
      </div>
      <div class="day" id="day6">
      </div>
      <div class="day" id="day7">
      </div>
    </div>
    <script>

      var pastDate = new Date();
      pastDate.setDate(pastDate.getDate() - 1);

      var futureDate = new Date();
      futureDate.setDate(futureDate.getDate() + 5);

      document.getElementById("currentWeekText").innerHTML = pastDate.toLocaleDateString() + " - " + futureDate.toLocaleDateString();

      for(var i=1; i<8; i++) {

        var d = new Date();
        d.setDate(pastDate.getDate() - 1 + i);
        var dayDiv = document.getElementById("day" + i);
        var p = document.createElement("p");
        p.innerHTML = d.toLocaleDateString();
        dayDiv.appendChild(p);

      }

      function dashboard() {

        var form = document.createElement('form');
        form.style.visibility = 'hidden';
        form.method = 'POST';
        form.action = 'dashboard.html';
        var key = document.createElement("input");
        key.name = "userID";
        key.value = "{{userID}}";
        form.appendChild(key);
        var username = document.createElement("input");
        username.name = "username";
        username.value = "{{username}}";
        form.appendChild(key);
        document.body.appendChild(form);
        form.submit();

      }

      function add() {

        var form = document.createElement('form');
        form.style.visibility = 'hidden';
        form.method = 'POST';
        var key = document.createElement("input");
        key.name = "userID";
        key.value = "{{userID}}";
        form.appendChild(key);
        var key2 = document.createElement("input");
        key2.name = "username";
        key2.value = "{{username}}";
        form.appendChild(key2);
        form.action = "newCalendarItem.html";
        document.body.appendChild(form);
        form.submit();

      }

      function search() {

      }

      function settings() {

      }

      function backWeek() {

          pastDate.setDate(pastDate.getDate() - 7);
          futureDate.setDate(futureDate.getDate() - 7);
          document.getElementById("currentWeekText").innerHTML = pastDate.toLocaleDateString() + " - " + futureDate.toLocaleDateString();

          for(var i=1; i<8; i++) {

            var d = new Date();
            d.setTime(pastDate.getTime() + ((i - 1) * 24 * 60 * 60 * 1000));
            var dayDiv = document.getElementById("day" + i);

            while(dayDiv.firstChild) {
              dayDiv.removeChild(dayDiv.firstChild);
            }

            var p = document.createElement("p");
            p.innerHTML = d.toLocaleDateString();
            dayDiv.appendChild(p);

          }

      }

      function forwardWeek() {

        pastDate.setDate(pastDate.getDate() + 7);
        futureDate.setDate(futureDate.getDate() + 7);
        document.getElementById("currentWeekText").innerHTML = pastDate.toLocaleDateString() + " - " + futureDate.toLocaleDateString();

        for(var i=1; i<8; i++) {

          var d = new Date();
          d.setTime(pastDate.getTime() + ((i - 1) * 24 * 60 * 60 * 1000));
          var dayDiv = document.getElementById("day" + i);

          while(dayDiv.firstChild) {
            dayDiv.removeChild(dayDiv.firstChild);
          }

          var p = document.createElement("p");
          p.innerHTML = d.toLocaleDateString();
          dayDiv.appendChild(p);

        }

      }

    </script>
  </body>
</html>
